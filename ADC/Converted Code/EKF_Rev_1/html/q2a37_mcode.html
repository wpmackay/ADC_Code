<pre class="code">
<span class="srcline"><span class="lineno"><a href="17,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">% This function converts a quaternion to an attitude matrix.</span></span></span>
<span class="srcline"><span class="lineno"><a href="17,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% Andrew Dianetti</span></span></span>
<span class="srcline"><span class="lineno"><a href="17,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% 5 December 2014</span></span></span>
<span class="srcline"><span class="lineno"><a href="17,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="17,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T12U3">A</span> = q2a(<span class="var type1" id="S3T13U6">q</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="17,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="17,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo" id="T12:U3"><span class="var type1" id="S2T12U9">A</span>=<span class="mxinfo" id="T12:U5">[<span class="mxinfo" id="T14:U6"><span class="mxinfo" id="T1:U7"><span class="mxinfo" id="T1:U8"><span class="mxinfo" id="T1:U9"><span class="mxinfo" id="T1:U10"><span class="mxinfo" id="T1:U11"><span class="var type1" id="S3T13U17">q</span>(<span class="mxinfo" id="T1:U13">1</span>)</span>^2</span>-<span class="mxinfo" id="T1:U14"><span class="mxinfo" id="T1:U15"><span class="var type1" id="S3T13U22">q</span>(<span class="mxinfo" id="T1:U17">2</span>)</span>^2</span></span>-<span class="mxinfo" id="T1:U18"><span class="mxinfo" id="T1:U19"><span class="var type1" id="S3T13U27">q</span>(<span class="mxinfo" id="T1:U21">3</span>)</span>^2</span></span>+<span class="mxinfo" id="T1:U22"><span class="mxinfo" id="T1:U23"><span class="var type1" id="S3T13U32">q</span>(<span class="mxinfo" id="T1:U25">4</span>)</span>^2</span></span>, <span class="mxinfo" id="T1:U26"><span class="mxinfo" id="T1:U27">2</span>*(<span class="mxinfo" id="T1:U28"><span class="mxinfo" id="T1:U29"><span class="mxinfo" id="T1:U30"><span class="var type1" id="S3T13U41">q</span>(<span class="mxinfo" id="T1:U32">1</span>)</span>*<span class="mxinfo" id="T1:U33"><span class="var type1" id="S3T13U44">q</span>(<span class="mxinfo" id="T1:U35">2</span>)</span></span>+<span class="mxinfo" id="T1:U36"><span class="mxinfo" id="T1:U37"><span class="var type1" id="S3T13U48">q</span>(<span class="mxinfo" id="T1:U39">3</span>)</span>*<span class="mxinfo" id="T1:U40"><span class="var type1" id="S3T13U51">q</span>(<span class="mxinfo" id="T1:U42">4</span>)</span></span></span>)</span>, <span class="mxinfo" id="T1:U43"><span class="mxinfo" id="T1:U44">2</span>*(<span class="mxinfo" id="T1:U45"><span class="mxinfo" id="T1:U46"><span class="mxinfo" id="T1:U47"><span class="var type1" id="S3T13U59">q</span>(<span class="mxinfo" id="T1:U49">1</span>)</span>*<span class="mxinfo" id="T1:U50"><span class="var type1" id="S3T13U62">q</span>(<span class="mxinfo" id="T1:U52">3</span>)</span></span>-<span class="mxinfo" id="T1:U53"><span class="mxinfo" id="T1:U54"><span class="var type1" id="S3T13U66">q</span>(<span class="mxinfo" id="T1:U56">2</span>)</span>*<span class="mxinfo" id="T1:U57"><span class="var type1" id="S3T13U69">q</span>(<span class="mxinfo" id="T1:U59">4</span>)</span></span></span>)</span></span>;</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="17,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T12:U3"><span class="mxinfo" id="T12:U5">   <span class="mxinfo" id="T14:U60"><span class="mxinfo" id="T1:U61"><span class="mxinfo" id="T1:U62">2</span>*(<span class="mxinfo" id="T1:U63"><span class="mxinfo" id="T1:U64"><span class="mxinfo" id="T1:U65"><span class="var type1" id="S3T13U78">q</span>(<span class="mxinfo" id="T1:U67">1</span>)</span>*<span class="mxinfo" id="T1:U68"><span class="var type1" id="S3T13U81">q</span>(<span class="mxinfo" id="T1:U70">2</span>)</span></span>-<span class="mxinfo" id="T1:U71"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S3T13U85">q</span>(<span class="mxinfo" id="T1:U74">3</span>)</span>*<span class="mxinfo" id="T1:U75"><span class="var type1" id="S3T13U88">q</span>(<span class="mxinfo" id="T1:U77">4</span>)</span></span></span>)</span>, <span class="mxinfo" id="T1:U78"><span class="mxinfo" id="T1:U79"><span class="mxinfo" id="T1:U80"><span class="mxinfo" id="T1:U81">-<span class="mxinfo" id="T1:U82"><span class="mxinfo" id="T1:U83"><span class="var type1" id="S3T13U96">q</span>(<span class="mxinfo" id="T1:U85">1</span>)</span>^2</span></span>+<span class="mxinfo" id="T1:U86"><span class="mxinfo" id="T1:U87"><span class="var type1" id="S3T13U101">q</span>(<span class="mxinfo" id="T1:U89">2</span>)</span>^2</span></span>-<span class="mxinfo" id="T1:U90"><span class="mxinfo" id="T1:U91"><span class="var type1" id="S3T13U106">q</span>(<span class="mxinfo" id="T1:U93">3</span>)</span>^2</span></span>+<span class="mxinfo" id="T1:U94"><span class="mxinfo" id="T1:U95"><span class="var type1" id="S3T13U111">q</span>(<span class="mxinfo" id="T1:U97">4</span>)</span>^2</span></span>, <span class="mxinfo" id="T1:U98"><span class="mxinfo" id="T1:U99">2</span>*(<span class="mxinfo" id="T1:U100"><span class="mxinfo" id="T1:U101"><span class="mxinfo" id="T1:U102"><span class="var type1" id="S3T13U120">q</span>(<span class="mxinfo" id="T1:U104">2</span>)</span>*<span class="mxinfo" id="T1:U105"><span class="var type1" id="S3T13U123">q</span>(<span class="mxinfo" id="T1:U107">3</span>)</span></span>+<span class="mxinfo" id="T1:U108"><span class="mxinfo" id="T1:U109"><span class="var type1" id="S3T13U127">q</span>(<span class="mxinfo" id="T1:U111">1</span>)</span>*<span class="mxinfo" id="T1:U112"><span class="var type1" id="S3T13U130">q</span>(<span class="mxinfo" id="T1:U114">4</span>)</span></span></span>)</span></span>;</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="17,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T12:U3"><span class="mxinfo" id="T12:U5">   <span class="mxinfo" id="T14:U115"><span class="mxinfo" id="T1:U116"><span class="mxinfo" id="T1:U117">2</span>*(<span class="mxinfo" id="T1:U118"><span class="mxinfo" id="T1:U119"><span class="mxinfo" id="T1:U120"><span class="var type1" id="S3T13U139">q</span>(<span class="mxinfo" id="T1:U122">1</span>)</span>*<span class="mxinfo" id="T1:U123"><span class="var type1" id="S3T13U142">q</span>(<span class="mxinfo" id="T1:U125">3</span>)</span></span>+<span class="mxinfo" id="T1:U126"><span class="mxinfo" id="T1:U127"><span class="var type1" id="S3T13U146">q</span>(<span class="mxinfo" id="T1:U129">2</span>)</span>*<span class="mxinfo" id="T1:U130"><span class="var type1" id="S3T13U149">q</span>(<span class="mxinfo" id="T1:U132">4</span>)</span></span></span>)</span>, <span class="mxinfo" id="T1:U133"><span class="mxinfo" id="T1:U134">2</span>*(<span class="mxinfo" id="T1:U135"><span class="mxinfo" id="T1:U136"><span class="mxinfo" id="T1:U137"><span class="var type1" id="S3T13U157">q</span>(<span class="mxinfo" id="T1:U139">2</span>)</span>*<span class="mxinfo" id="T1:U140"><span class="var type1" id="S3T13U160">q</span>(<span class="mxinfo" id="T1:U142">3</span>)</span></span>-<span class="mxinfo" id="T1:U143"><span class="mxinfo" id="T1:U144"><span class="var type1" id="S3T13U164">q</span>(<span class="mxinfo" id="T1:U146">1</span>)</span>*<span class="mxinfo" id="T1:U147"><span class="var type1" id="S3T13U167">q</span>(<span class="mxinfo" id="T1:U149">4</span>)</span></span></span>)</span>, <span class="mxinfo" id="T1:U150"><span class="mxinfo" id="T1:U151"><span class="mxinfo" id="T1:U152"><span class="mxinfo" id="T1:U153">-<span class="mxinfo" id="T1:U154"><span class="mxinfo" id="T1:U155"><span class="var type1" id="S3T13U175">q</span>(<span class="mxinfo" id="T1:U157">1</span>)</span>^2</span></span>-<span class="mxinfo" id="T1:U158"><span class="mxinfo" id="T1:U159"><span class="var type1" id="S3T13U180">q</span>(<span class="mxinfo" id="T1:U161">2</span>)</span>^2</span></span>+<span class="mxinfo" id="T1:U162"><span class="mxinfo" id="T1:U163"><span class="var type1" id="S3T13U185">q</span>(<span class="mxinfo" id="T1:U165">3</span>)</span>^2</span></span>+<span class="mxinfo" id="T1:U166"><span class="mxinfo" id="T1:U167"><span class="var type1" id="S3T13U190">q</span>(<span class="mxinfo" id="T1:U169">4</span>)</span>^2</span></span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="17,10" id="srcline10">10</a></span><span class="line">   </span></span>
</pre>
